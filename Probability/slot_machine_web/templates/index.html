<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>拉霸機遊戲 🎰</title>
    <style>
        body { text-align: center; font-family: Arial; padding: 30px; }
        #result { font-size: 40px; margin: 20px; }
        #reward, #status { margin: 10px; font-size: 18px; }
        button { padding: 10px 20px; font-size: 20px; }
    </style>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>🎰 拉霸機</h1>

    <div id="result">❓ ❓ ❓</div>
    <button onclick="spin()">開始轉動</button>

    <div id="reward">請點擊按鈕開始</div>
    <div id="status">💰 金幣：{{ coins }} ｜ 🎁 免費轉：{{ free_spins }}</div>

    <script>
        function spin() {
            fetch("/spin", { method: "POST" })
                .then(res => res.json())
                .then(data => {
                    if (data.error) {
                        alert(data.error);
                        return;
                    }

                    document.getElementById("result").innerText = data.result.join(" ");
                    let rewardText = `獲得 ${data.reward} 元`;
                    if (data.free_spins > 0) {
                        rewardText += `，🎁 免費轉剩下 ${data.free_spins} 次`;
                    }
                    document.getElementById("reward").innerText = rewardText;
                    document.getElementById("status").innerText = `💰 金幣：${data.coins} ｜ 🎁 免費轉：${data.free_spins}`;
                });
        }
    </script>
</body>
</html>